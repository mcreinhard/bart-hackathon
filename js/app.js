// Generated by CoffeeScript 1.7.1
var area, svg, _i, _len, _ref;

svg = d3.select('svg').attr({
  width: window.innerWidth - 30,
  height: window.innerHeight - 30
});

_ref = ['sf', 'richmond', 'pbp', 'dp', 'fremont'];
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
  area = _ref[_i];
  svg.selectAll("line.station." + area).data(stations[area], function(d) {
    return d.station;
  }).enter().append('line').attr({
    x1: function(d) {
      return add(maps[area].position(d.time), scale(1, rotate90(maps[area].tangent(d.time)))).x;
    },
    y1: function(d) {
      return add(maps[area].position(d.time), scale(1, rotate90(maps[area].tangent(d.time)))).y;
    },
    x2: function(d) {
      return subtract(maps[area].position(d.time), scale(1, rotate90(maps[area].tangent(d.time)))).x;
    },
    y2: function(d) {
      return subtract(maps[area].position(d.time), scale(1, rotate90(maps[area].tangent(d.time)))).y;
    }
  }).classed({
    station: true
  }).classed("" + area, true);
  svg.selectAll("text.station." + area).data(stations[area], function(d) {
    return d.station;
  }).enter().append('text').attr({
    x: function(d) {
      return maps[area].position(d.time).x;
    },
    y: function(d) {
      return maps[area].position(d.time).y;
    },
    transform: function(d) {
      return "rotate(-45 " + (maps[area].position(d.time).x) + " " + (maps[area].position(d.time).y) + ")";
    }
  }).text(function(d) {
    return stationNames[d.station.toLowerCase()];
  }).classed({
    station: true
  }).classed("" + area, true);
}

//# sourceMappingURL=app.map
